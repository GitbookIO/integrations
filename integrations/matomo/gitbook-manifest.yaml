name: matomo
title: Matomo
icon: ./assets/icon.png
previewImages:
    - ./assets/preview.png
organization: 2zoWGxtV7bjhbwBdjGPS
description: Receive GitBook traffic insights directly in your Matomo dashboard.
visibility: public
script: ./src/index.ts
# The following scope(s) are available only to GitBook Staff
# See https://developer.gitbook.com/integrations/configurations#scopes
scopes:
    - site:script:inject
    - site:script:cookies
categories:
    - analytics
contentSecurityPolicy:
    # Allow loading Matomo JS tracker and sending beacons to user-provided hosts
    script-src: |
        *;
    img-src: |
        *;
    connect-src: |
        *;
summary: |
    # Overview

    Matomo (formerly Piwik) is a powerful open‑source web analytics platform. This integration lets you track visits to your published GitBook spaces directly in your Matomo instance (cloud or self‑hosted).

    # How it works

    The integration injects a lightweight tracking script that respects GitBook's cookie consent. When consent is granted, it sends pageview events to your configured Matomo server using the Matomo Tracking API. Single‑page navigation within GitBook is tracked automatically.

    # Configure

    Install the integration on the GitBook space(s) you want to track, then provide your Matomo server URL and Site ID.
externalLinks:
    - label: Matomo developer docs
      url: https://developer.matomo.org/integration
configurations:
    site:
        properties:
            server_url:
                type: string
                title: Matomo Server URL
                description: |
                    Your Matomo server base URL. Examples: https://your-site.matomo.cloud or https://matomo.example.com
            site_id:
                type: string
                title: Site ID
                description: The numeric site ID configured in your Matomo instance
            load_js_tracker:
                type: boolean
                title: Load Matomo JS tracker
                description: |
                    When enabled, loads matomo.js for first‑party cookies and richer tracking.
                default: true
            track_referrer:
                type: boolean
                title: Track Referrer
                description: |
                    Include document.referrer for pageviews/events (recommended)
                default: true
            track_outbound_clicks:
                type: boolean
                title: Track outbound link clicks
                description: |
                    Record clicks on links pointing to external domains
                default: true
            click_selectors:
                type: string
                title: CSS selectors to track
                description: |
                    Comma‑separated CSS selectors to track clicks as events. Example: a[href*="try"],button.book-demo
                default: ''
            goal_mappings_json:
                type: string
                title: Goal mappings (JSON)
                description: |
                    Optional JSON object mapping CSS selectors to Matomo Goal IDs.
                default: ''
            user_id_cookie:
                type: string
                title: User ID cookie name
                description: |
                    Optional cookie name to read and set as Matomo user ID (for retention/cohort analysis)
                default: ''
        required:
            - server_url
            - site_id
target: site


